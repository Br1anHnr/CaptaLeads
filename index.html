<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Captador de Leads — Jr. Eng</title>
<style>
  :root{
    --bg-deep:#070b14; --bg-mid:#0b1324;
    --blue:#2563eb; --blue-2:#1d4ed8; --cyan:#22d3ee; --violet:#7c3aed; --magenta:#db2777;
    --text:#e5e7eb; --muted:#9aa4b2;
    --glass-bg: rgba(255,255,255,.08); --glass-line: rgba(255,255,255,.18); --glass-blur: 18px;
    --r-lg:20px; --r-md:12px; --w: 520px; --h: 50px;
  }
  *{box-sizing:border-box}
  html,body{height:100%}

  /* ===== Centralização total ===== */
  body{
    margin:0;
    font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
    color:var(--text);
    background: radial-gradient(1200px 600px at 50% -10%, #0f1b34 0, transparent 60%),
               linear-gradient(180deg, var(--bg-deep), var(--bg-mid) 60%, #0a1221);
    display:flex; align-items:center; justify-content:center;
    min-height:100vh; overflow:hidden;
  }

  /* Aurora */
  .aurora, .aurora::before, .aurora::after{
    position:fixed; inset:-20vmax; content:""; pointer-events:none; z-index:0;
    filter: blur(60px) saturate(130%); mix-blend-mode: screen;
    background:
      radial-gradient(40vmax 40vmax at 15% 20%, rgba(34,211,238,.18), transparent 55%),
      radial-gradient(40vmax 40vmax at 80% 30%, rgba(124,58,237,.22), transparent 60%),
      radial-gradient(45vmax 45vmax at 40% 85%, rgba(37,99,235,.20), transparent 55%);
    animation: floatA 18s ease-in-out infinite;
  }
  .aurora::before{
    background:
      radial-gradient(40vmax 40vmax at 20% 70%, rgba(29,78,216,.22), transparent 55%),
      radial-gradient(30vmax 30vmax at 75% 65%, rgba(219,39,119,.18), transparent 60%);
    animation: floatB 26s ease-in-out infinite;
  }
  .aurora::after{
    background:
      radial-gradient(40vmax 40vmax at 60% 15%, rgba(34,211,238,.18), transparent 55%),
      radial-gradient(30vmax 30vmax at 85% 80%, rgba(124,58,237,.20), transparent 60%);
    animation: floatC 22s ease-in-out infinite;
  }
  @keyframes floatA{0%,100%{transform:translate3d(0,0,0)}50%{transform:translate3d(2vmax,-2vmax,0)}}
  @keyframes floatB{0%,100%{transform:translate3d(0,0,0)}50%{transform:translate3d(-3vmax,1vmax,0)}}
  @keyframes floatC{0%,100%{transform:translate3d(0,0,0)}50%{transform:translate3d(2vmax,3vmax,0)}}

  canvas#stars{position:fixed; inset:0; z-index:0; opacity:.45}

  /* ===== Cartão ===== */
  .card{
    position:relative; z-index:1; width:min(92vw, var(--w));
    padding:28px 26px 32px; border-radius:var(--r-lg);
    background:var(--glass-bg); border:1px solid var(--glass-line);
    backdrop-filter: blur(var(--glass-blur));
    box-shadow: 0 30px 80px rgba(0,0,0,.45), 0 0 0 1px rgba(255,255,255,.06) inset;
    transform: translateY(20px); opacity:0; animation: fadeInUp .9s ease forwards;
  }
  .card::before{
    content:""; position:absolute; inset:0; border-radius:inherit; pointer-events:none;
    background: linear-gradient(180deg, rgba(34,211,238,.22), rgba(124,58,237,.0) 45%);
    mix-blend-mode: screen;
  }
  @keyframes fadeInUp{from{opacity:0; transform:translateY(40px)} to{opacity:1; transform:translateY(0)}}

  .brand{display:flex; align-items:center; gap:10px; margin-bottom:6px}
  .brand-logo{
    width:38px; height:38px; border-radius:12px;
    background: radial-gradient(circle at 30% 30%, #fff, #9ecbff 40%, #4b7ef7 60%),
                conic-gradient(from 0deg, #22d3ee, #7c3aed, #2563eb, #22d3ee);
    box-shadow: 0 0 24px rgba(59,130,246,.55);
  }
  h1{margin:0; font-size:22px; font-weight:800; letter-spacing:.2px}
  .sub{margin:6px 0 22px 48px; color:var(--muted); font-size:13px}

  .field{margin-bottom:16px}
  .control{
    position:relative; border:1px solid rgba(255,255,255,.18); border-radius:12px;
    background: rgba(255,255,255,.06);
    box-shadow: inset 0 1px 0 rgba(255,255,255,.08), 0 10px 26px rgba(2,6,23,.45);
    transition:border-color .15s, box-shadow .15s, transform .15s, background .15s;
  }
  .control:hover{transform:translateY(-1px)}
  .control:has(input:focus){
    border-color: rgba(34,211,238,.6);
    box-shadow: 0 0 0 6px rgba(34,211,238,.15),
                inset 0 1px 0 rgba(255,255,255,.1), 0 10px 26px rgba(2,6,23,.45);
    background: rgba(255,255,255,.08);
  }
  input{all:unset; display:block; width:100%; height:var(--h); padding:0 14px; color:#fff; font-size:14px}
  .label{
    position:absolute; left:14px; top:50%; transform:translateY(-50%);
    background:transparent; color:#cbd5e1; font-size:13px; pointer-events:none; transition:.16s ease;
  }
  input:focus + .label, input:not(:placeholder-shown) + .label{
    top:-8px; transform:none; font-size:12px; color:#93c5fd;
    background: rgba(3,7,18,.55); padding:0 6px; border-radius:10px;
    box-shadow: 0 0 0 1px rgba(255,255,255,.08) inset;
  }

  .actions{margin-top:6px}

  /* ===== Botão com spinner / brilho ===== */
  .btn{
    position:relative; width:100%; height:54px; border:0; border-radius:14px; color:#fff; font-weight:800;
    letter-spacing:.2px; cursor:pointer;
    background: linear-gradient(180deg, var(--blue), var(--blue-2));
    box-shadow: 0 18px 42px rgba(37,99,235,.35), 0 0 0 1px rgba(255,255,255,.06) inset;
    transition: transform .1s, box-shadow .2s, filter .2s, background .2s;
    overflow:hidden;
  }
  .btn::after{
    content:""; position:absolute; inset:0; border-radius:inherit; pointer-events:none;
    background: linear-gradient(120deg, rgba(255,255,255,.25) 0%, rgba(255,255,255,0) 40%);
    transform: translateX(-120%); transition: transform .7s ease;
  }
  .btn:hover{transform:translateY(-1px); box-shadow:0 24px 56px rgba(37,99,235,.45)}
  .btn:hover::after{transform: translateX(0)}
  .btn:active{transform:translateY(0); filter:saturate(1.06)}
  .btn:focus{outline:0; box-shadow:0 0 0 8px rgba(34,211,238,.18), 0 18px 42px rgba(37,99,235,.35)}

  /* Estado de loading: brilho + spinner */
  .btn.loading::after{ animation: shine 1.4s linear infinite; }
  @keyframes shine{0%{transform:translateX(-120%)}100%{transform:translateX(120%)}}
  .btn.loading .spinner{
    position:absolute; left:14px; top:50%; transform:translateY(-50%);
    width:18px; height:18px; border-radius:50%;
    border:2px solid rgba(255,255,255,.45); border-top-color:#fff;
    animation: spin .7s linear infinite;
  }
  @keyframes spin{to{transform:translateY(-50%) rotate(360deg)}}

  .note{margin-top:14px; text-align:center; color:var(--muted); font-size:12px}

  /* ===== Toast (mensagem flutuante visível) ===== */
  #toast{
    position:fixed; top:24px; right:24px; z-index:1000;
    min-width:260px; max-width:min(92vw,420px);
    background: rgba(18, 25, 45, .96);
    color:#e2e8f0; padding:14px 16px; border-radius:12px;
    border:1px solid rgba(255,255,255,.12);
    box-shadow: 0 12px 32px rgba(0,0,0,.55);
    display:flex; align-items:center; gap:10px;
    opacity:0; transform:translateY(-16px); pointer-events:none;
    transition:opacity .35s ease, transform .35s ease;
  }
  #toast.show{opacity:1; transform:translateY(0); pointer-events:auto}
  #toast.success{border-left:4px solid #22c55e}
  #toast.error{border-left:4px solid #ef4444}
  #toast .check{
    width:18px; height:18px; border-radius:50%;
    background:radial-gradient(circle at 30% 30%, #fff, #9ef7c0 45%, #22c55e 70%);
    box-shadow:0 0 12px rgba(34,197,94,.55);
  }
  #toast .cross{
    width:18px; height:18px; border-radius:50%;
    background:radial-gradient(circle at 30% 30%, #fff, #f7b4b4 45%, #ef4444 70%);
    box-shadow:0 0 12px rgba(239,68,68,.55);
  }

  /* ===== Confete (sucesso) ===== */
  .confetti{
    position:fixed; inset:0; pointer-events:none; z-index:900;
  }
  .confetti span{
    position:absolute; width:8px; height:10px; border-radius:2px;
    animation: fall 900ms ease-out forwards;
  }
  @keyframes fall{
    0%{transform:translateY(0) rotate(0deg); opacity:1}
    100%{transform:translateY(80px) rotate(260deg); opacity:0}
  }

  @media (prefers-reduced-motion: reduce){
    .aurora, .aurora::before, .aurora::after{animation:none}
    .btn::after{display:none}
    .btn, .control{transition:none}
  }
</style>
</head>
<body>
  <!-- Aurora + estrelas -->
  <div class="aurora" aria-hidden="true"></div>
  <canvas id="stars" aria-hidden="true"></canvas>

  <!-- Toast -->
  <div id="toast" role="alert" aria-live="polite"></div>

  <!-- Confete -->
  <div class="confetti" id="confetti" aria-hidden="true"></div>

  <!-- Cartão -->
  <section class="card" role="form" aria-labelledby="t">
    <div class="brand">
      <div class="brand-logo" aria-hidden="true"></div>
      <h1 id="t">Captador de Leads — Jr. Eng</h1>
    </div>
    <p class="sub">Preencha os campos para buscar leads qualificados.</p>

    <!-- Form com submit assíncrono para o Webhook -->
    <form id="leadForm" novalidate>
      <div class="field">
        <div class="control">
          <input id="nicho" name="nicho" type="text" placeholder=" " required autocomplete="organization-title" />
          <label class="label" for="nicho">Nicho *</label>
        </div>
      </div>

      <div class="field">
        <div class="control">
          <input id="localizacao" name="localizacao" type="text" placeholder=" " required autocomplete="address-level2" />
          <label class="label" for="localizacao">Localização *</label>
        </div>
      </div>

      <div class="actions">
        <button class="btn" id="submitBtn" type="submit">
          <span class="btn-text">Buscar Leads</span>
        </button>
        <div id="formStatus" class="note" style="min-height:18px;"></div>
      </div>
    </form>

    <p class="note">Seus dados não são compartilhados com terceiros.</p>
  </section>

<script>
/* ===== Estrelas simples em canvas ===== */
(function(){
  const c = document.getElementById('stars');
  const ctx = c.getContext('2d');
  let W, H, stars = [];
  const COUNT = 120;
  function resize(){
    W = c.width = window.innerWidth;
    H = c.height = window.innerHeight;
    stars = Array.from({length: COUNT}, () => ({
      x: Math.random()*W, y: Math.random()*H,
      r: Math.random()*1.3 + .2, s: Math.random()*.6 + .1
    }));
  }
  function step(){
    ctx.clearRect(0,0,W,H);
    ctx.fillStyle = "rgba(255,255,255,0.9)";
    for(const st of stars){
      ctx.globalAlpha = 0.6 + Math.sin((st.y+st.x)*0.002 + performance.now()*0.001)*0.4;
      ctx.beginPath(); ctx.arc(st.x, st.y, st.r, 0, Math.PI*2); ctx.fill();
      st.y -= st.s; if(st.y < -2){ st.y = H + 2; st.x = Math.random()*W; }
    }
    requestAnimationFrame(step);
  }
  window.addEventListener('resize', resize);
  resize(); step();
})();

/* ===== Utilidades UI ===== */
function showToast(message, type="success"){
  const toast = document.getElementById('toast');
  const icon = document.createElement('div');
  icon.className = type === 'success' ? 'check' : 'cross';
  toast.className = ''; // reset
  toast.innerHTML = '';
  toast.appendChild(icon);
  const text = document.createElement('div');
  text.textContent = message;
  toast.appendChild(text);
  toast.classList.add('show', type);
  clearTimeout(showToast._t);
  showToast._t = setTimeout(()=> toast.classList.remove('show'), 4200);
}

function burstConfetti(x, y){
  const wrap = document.getElementById('confetti');
  const colors = ['#22d3ee','#7c3aed','#2563eb','#fcd34d','#22c55e','#db2777','#e879f9'];
  for(let i=0;i<26;i++){
    const s = document.createElement('span');
    s.style.left = (x + (Math.random()*40-20)) + 'px';
    s.style.top  = (y + (Math.random()*8-4)) + 'px';
    s.style.background = colors[Math.random()*colors.length|0];
    s.style.transform = `translateY(0) rotate(${Math.random()*180|0}deg)`;
    s.style.opacity = '0.95';
    s.style.animationDelay = (Math.random()*0.15)+'s';
    wrap.appendChild(s);
    setTimeout(()=> s.remove(), 1000);
  }
}

/* ===== Envio assíncrono para o Webhook do n8n ===== */
(function () {
  const WEBHOOK_URL = "https://n8n.projectvalemind.com/webhook/captaleads";
  const form = document.getElementById("leadForm");
  const btn  = document.getElementById("submitBtn");
  const btnText = btn.querySelector('.btn-text');
  const status = document.getElementById("formStatus");

  function setStatus(msg, ok = true) {
    status.textContent = msg || "";
    status.style.color = ok ? "#9aa4b2" : "#ef4444";
  }

  form.addEventListener("submit", async (e) => {
    e.preventDefault();
    if (!form.reportValidity()) return;

    const payload = {
      nicho: document.getElementById("nicho").value.trim(),
      localizacao: document.getElementById("localizacao").value.trim(),
      source: "captaLeadsSite",
      ts: new Date().toISOString()
    };

    // Estado visual: carregando
    btn.disabled = true;
    btn.classList.add("loading");
    btn.insertAdjacentHTML('afterbegin','<span class="spinner" aria-hidden="true"></span>');
    btnText.textContent = "Buscando leads…";
    setStatus("Enviando dados para a planilha de leads…");

    try {
      const res = await fetch(WEBHOOK_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(payload),
      });
      if (!res.ok) throw new Error("Erro HTTP");

      // Sucesso
      form.reset();
      showToast("Leads enviados com sucesso para sua planilha! ✅", "success");
      setStatus("Enviado com sucesso! Obrigado.");

      // Botão em estado de sucesso
      btn.style.background = "linear-gradient(90deg,#22c55e,#16a34a)";
      btnText.textContent = "Enviado!";
      // Confete próximo ao botão
      const rect = btn.getBoundingClientRect();
      burstConfetti(rect.left + rect.width/2, rect.top + window.scrollY + rect.height/2);

      // Voltar ao normal
      setTimeout(()=>{
        btnText.textContent = "Buscar Leads";
        btn.style.background = "";
      }, 1800);

      // Opcional: redirecionar para página de obrigado
      // window.location.href = "/obrigado.html";
    } catch (err) {
      // Erro
      showToast("Erro ao enviar. Verifique sua conexão e tente novamente.", "error");
      setStatus("Erro ao enviar. Tente novamente.", false);
      btnText.textContent = "Tentar novamente";
    } finally {
      btn.disabled = false;
      btn.classList.remove("loading");
      const sp = btn.querySelector('.spinner'); if (sp) sp.remove();
    }
  });
})();
</script>
</body>
</html>
